{"version":3,"sources":["components/Button/Button.module.css","components/Modal/Modal.module.css","components/Container/Container.module.css","components/Loader/Loader.module.css","components/Container/Container.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Loader/Loader.js","components/Button/Button.js","components/Modal/Modal.js","services/settings.js","services/pixabay-api.js","App.js","index.js"],"names":["module","exports","Container","children","className","style","container","Searchbar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","this","type","onChange","autocomplete","autofocus","placeholder","Component","ImageGalleryItem","id","user","largeImageURL","webformatURL","onClick","console","log","src","alt","ImageGallery","images","showLargeImage","map","Loader","styles","div_loader","color","height","width","Button","onLoadMore","div_button","button","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","event","target","window","addEventListener","removeEventListener","createPortal","overlay","modal","data","API_KEY","PER_PAGE","instance","axios","create","defaults","baseURL","searchQuery","currentPage","get","timeout","then","response","App","isLoading","totalImages","showModal","error","fetchImages","options","pixabayApi","imagesQuery","hits","total","prevState","catch","finally","onChangeQuery","toggleModal","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","diffCurrentLoadImages","length","isShowLoadMore","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a204cd83.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"div_button\":\"Button_div_button__Xrbaf\",\"button\":\"Button_button__3QF_k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2GjdW\",\"modal\":\"Modal_modal__P3_V5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3RIox\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"div_loader\":\"Loader_div_loader__2XBYZ\"};","import React from \"react\";\n\nimport style from \"./Container.module.css\";\n\nconst Container = ({ children }) => (\n  <div className={style.container}>{children}</div>\n);\n\nexport default Container;\n","import React, { Component } from \"react\";\n\nclass Searchbar extends Component {\n  state = { query: \"\" };\n\n  handleChange = (e) => {\n    this.setState({ query: e.currentTarget.value });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: \"\" });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            value={this.state.query}\n            onChange={this.handleChange}\n            autocomplete=\"off\"\n            autofocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from \"react\";\n\nconst ImageGalleryItem = ({\n  id,\n  user,\n  largeImageURL,\n  webformatURL,\n  onClick,\n}) => {\n  console.log(\"onlickImage ~ onClick: \", onClick);\n\n  const onClickImage = (e) => {\n    console.log(\"onlickImage ~ e: \", largeImageURL);\n    onClick({ largeImageURL });\n  };\n\n  return (\n    <li key={id} className=\"ImageGalleryItem\">\n      <img\n        src={webformatURL}\n        alt={user}\n        className=\"ImageGalleryItem-image\"\n        onClick={onClickImage}\n      />\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n","import React from \"react\";\n\nimport ImageGalleryItem from \"../ImageGalleryItem\";\n\nconst ImageGallery = ({ images, showLargeImage }) => {\n  return (\n    <ul className=\"ImageGallery\">\n      {images.map(({ id, user, largeImageURL, webformatURL }) => (\n        <ImageGalleryItem\n          id={id}\n          user={user}\n          largeImageURL={largeImageURL}\n          webformatURL={webformatURL}\n          onClick={showLargeImage}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default ImageGallery;\n","import React, { Component } from \"react\";\nimport LoaderItem from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nimport styles from \"./Loader.module.css\";\n\nclass Loader extends Component {\n  //other logic\n  render() {\n    return (\n      <div className={styles.div_loader}>\n        <LoaderItem type=\"Oval\" color=\"#00BFFF\" height={60} width={60} />\n      </div>\n    );\n  }\n}\n\nexport default Loader;\n","import React from \"react\";\n\nimport styles from \"./Button.module.css\";\n\nconst Button = ({ onLoadMore }) => {\n  return (\n    <div className={styles.div_button}>\n      <button className={styles.button} onClick={onLoadMore}>\n        Load more\n      </button>\n    </div>\n  );\n};\n\nexport default Button;\n","import React, { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styles from \"./Modal.module.css\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    console.log(\"Modal componentDidMount\");\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    console.log(\"Modal componentWillUnmount\");\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      console.log(\"Enter ESC, Modal close\");\n\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = (event) => {\n    console.log(\"currentTarget: \", event.currentTarget);\n    console.log(\"target: \", event.target);\n\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={styles.overlay} onClick={this.handleBackdropClick}>\n        <div className={styles.modal}>\n          <img src={this.props.largeImageURL} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n","import React from \"react\";\n\nconst data = { API_KEY: \"21791373-989f8b5e7418bf068b731f5c9\", PER_PAGE: 12 };\n\nexport default data;\n","import axios from \"axios\";\nimport data from \"./settings\";\n\nconst instance = axios.create();\ninstance.defaults.baseURL = \"https://pixabay.com/api/\";\n// instance.defaults.timeout = 2000;\n\n// https://pixabay.com/api/?q=что_искать&page=номер_страницы&key=твой_ключ&image_type=photo&orientation=horizontal&per_page=12\n\nconst fetchImages = ({ searchQuery = \"\", currentPage = 1 }) => {\n  const query = `?q=${searchQuery}&page=${currentPage}&key=${data.API_KEY}&image_type=photo&orientation=horizontal&per_page=${data.PER_PAGE}`;\n\n  // console.log(\"fetchImages ~ searchQuery: \", searchQuery);\n  // console.log(\"fetchImages ~ currentPage: \", currentPage);\n\n  const userRequest = instance\n    .get(`${query}`, {\n      timeout: 10000,\n    })\n    .then((response) => response.data);\n  return userRequest;\n};\n\nexport default { fetchImages };\n","import React, { Component } from \"react\";\nimport LoaderItem from \"react-loader-spinner\";\n\nimport Container from \"./components/Container\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\nimport Loader from \"./components/Loader\";\nimport Button from \"./components/Button\";\nimport Modal from \"./components/Modal\";\n\nimport pixabayApi from \"./services/pixabay-api\";\n\nexport default class App extends Component {\n  state = {\n    images: [],\n    searchQuery: \"\",\n    currentPage: 1,\n    largeImageURL: \"\",\n    isLoading: false,\n    totalImages: 0,\n    showModal: false,\n    error: null,\n  };\n\n  componentDidMount() {\n    console.log(\"App componentDidMount\");\n\n    const { searchQuery, currentPage } = this.state;\n\n    this.fetchImages();\n\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  }\n\n  fetchImages = () => {\n    const { currentPage, searchQuery } = this.state;\n    const options = { searchQuery, currentPage };\n    // console.log(\"App ~ options: \", options);\n\n    this.setState({ isLoading: true });\n\n    pixabayApi\n      .fetchImages(options)\n      .then((data) => {\n        console.log(\"APP pixabayApi ~ data: \", data);\n\n        const imagesQuery = data.hits;\n        const totalImages = data.total;\n        this.setState((prevState) => ({\n          images: [...prevState.images, ...imagesQuery],\n          totalImages: totalImages,\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .catch((error) => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  onChangeQuery = (query) => {\n    console.log(\"App ~ query: \", query);\n    this.setState({\n      searchQuery: query,\n      currentPage: 1,\n      images: [],\n      error: null,\n    });\n  };\n\n  onLoadMore = () => {\n    this.fetchImages();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  showLargeImage = ({ largeImageURL }) => {\n    console.log(\"App ~ url\", largeImageURL);\n\n    this.setState({\n      largeImageURL: largeImageURL,\n      showModal: !this.state.showModal,\n    });\n  };\n\n  render() {\n    const { images, isLoading, totalImages, showModal, largeImageURL } =\n      this.state;\n    const diffCurrentLoadImages = totalImages - images.length;\n    const isShowLoadMore =\n      images.length > 0 && diffCurrentLoadImages > 0 && !isLoading;\n\n    return (\n      <Container>\n        <Searchbar onSubmit={this.onChangeQuery} />\n        {images.length > 0 && (\n          <ImageGallery showLargeImage={this.showLargeImage} images={images} />\n        )}\n\n        {isLoading && <Loader />}\n\n        {isShowLoadMore && <Button onLoadMore={this.onLoadMore} />}\n\n        {/* <Modal onClose={this.toggleModal}>\n                    <p>MODAL</p>\n                </Modal> */}\n\n        {showModal && (\n          <Modal\n            largeImageURL={largeImageURL}\n            onClose={this.toggleModal}\n          ></Modal>\n        )}\n      </Container>\n    );\n  }\n}\n\n// export default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"modern-normalize/modern-normalize.css\";\n\nimport App from \"./App\";\nimport \"./styles.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}