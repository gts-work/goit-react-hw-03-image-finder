{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Modal/Modal.module.css","components/Container/Container.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/Container/Container.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Loader/Loader.js","components/Button/Button.js","components/Modal/Modal.js","services/settings.js","services/pixabay-api.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Container","children","className","style","container","Searchbar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","searchbar","search_form","this","type","search_form_button","search_form_button_label","search_form_input","onChange","autocomplete","autofocus","placeholder","Component","ImageGalleryItem","id","user","largeImageURL","webformatURL","onClick","console","log","image_gallery_item","src","alt","image_gallery_item_image","ImageGallery","images","showLargeImage","image_gallery","map","Loader","styles","div_loader","color","height","width","Button","onLoadMore","div_button","button","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","event","target","window","addEventListener","removeEventListener","createPortal","overlay","modal","data","API_KEY","PER_PAGE","instance","axios","create","defaults","baseURL","searchQuery","currentPage","get","timeout","then","response","App","isLoading","totalImages","showModal","error","fetchImages","options","pixabayApi","imagesQuery","hits","total","prevState","catch","finally","onChangeQuery","toggleModal","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","diffCurrentLoadImages","length","isShowLoadMore","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5f7822b1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"image_gallery_item\":\"ImageGalleryItem_image_gallery_item__3hfm5\",\"image_gallery_item_image\":\"ImageGalleryItem_image_gallery_item_image__2Xg13\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"div_button\":\"Button_div_button__Xrbaf\",\"button\":\"Button_button__3QF_k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2GjdW\",\"modal\":\"Modal_modal__P3_V5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3RIox\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image_gallery\":\"ImageGallery_image_gallery__3lXlD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"div_loader\":\"Loader_div_loader__2XBYZ\"};","import React from \"react\";\n\nimport style from \"./Container.module.css\";\n\nconst Container = ({ children }) => (\n  <div className={style.container}>{children}</div>\n);\n\nexport default Container;\n","import React, { Component } from \"react\";\n\nimport style from \"./Searchbar.module.css\";\n\nclass Searchbar extends Component {\n  state = { query: \"\" };\n\n  handleChange = (e) => {\n    this.setState({ query: e.currentTarget.value });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: \"\" });\n  };\n\n  render() {\n    return (\n      <header className={style.searchbar}>\n        <form className={style.search_form} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={style.search_form_button}>\n            <span className={style.search_form_button_label}>Search</span>\n          </button>\n\n          <input\n            className={style.search_form_input}\n            type=\"text\"\n            value={this.state.query}\n            onChange={this.handleChange}\n            autocomplete=\"off\"\n            autofocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from \"react\";\n\nimport style from \"./ImageGalleryItem.module.css\";\n\nconst ImageGalleryItem = ({\n  id,\n  user,\n  largeImageURL,\n  webformatURL,\n  onClick,\n}) => {\n  console.log(\"onlickImage ~ onClick: \", onClick);\n\n  const onClickImage = (e) => {\n    console.log(\"onlickImage ~ e: \", largeImageURL);\n    onClick({ largeImageURL });\n  };\n\n  return (\n    <li key={id} className={style.image_gallery_item}>\n      <img\n        src={webformatURL}\n        alt={user}\n        className={style.image_gallery_item_image}\n        onClick={onClickImage}\n      />\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n","import React from \"react\";\n\nimport ImageGalleryItem from \"../ImageGalleryItem\";\nimport style from \"./ImageGallery.module.css\";\n\nconst ImageGallery = ({ images, showLargeImage }) => {\n  return (\n    <ul className={style.image_gallery}>\n      {images.map(({ id, user, largeImageURL, webformatURL }) => (\n        <ImageGalleryItem\n          id={id}\n          user={user}\n          largeImageURL={largeImageURL}\n          webformatURL={webformatURL}\n          onClick={showLargeImage}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default ImageGallery;\n","import React, { Component } from \"react\";\nimport LoaderItem from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nimport styles from \"./Loader.module.css\";\n\nclass Loader extends Component {\n  //other logic\n  render() {\n    return (\n      <div className={styles.div_loader}>\n        <LoaderItem type=\"Oval\" color=\"#00BFFF\" height={60} width={60} />\n      </div>\n    );\n  }\n}\n\nexport default Loader;\n","import React from \"react\";\n\nimport styles from \"./Button.module.css\";\n\nconst Button = ({ onLoadMore }) => {\n  return (\n    <div className={styles.div_button}>\n      <button className={styles.button} onClick={onLoadMore}>\n        Load more\n      </button>\n    </div>\n  );\n};\n\nexport default Button;\n","import React, { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styles from \"./Modal.module.css\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    console.log(\"Modal componentDidMount\");\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    console.log(\"Modal componentWillUnmount\");\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      console.log(\"Enter ESC, Modal close\");\n\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = (event) => {\n    console.log(\"currentTarget: \", event.currentTarget);\n    console.log(\"target: \", event.target);\n\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={styles.overlay} onClick={this.handleBackdropClick}>\n        <div className={styles.modal}>\n          <img src={this.props.largeImageURL} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n","import React from \"react\";\n\nconst data = { API_KEY: \"21791373-989f8b5e7418bf068b731f5c9\", PER_PAGE: 12 };\n\nexport default data;\n","import axios from \"axios\";\nimport data from \"./settings\";\n\nconst instance = axios.create();\ninstance.defaults.baseURL = \"https://pixabay.com/api/\";\n// instance.defaults.timeout = 2000;\n\n// https://pixabay.com/api/?q=что_искать&page=номер_страницы&key=твой_ключ&image_type=photo&orientation=horizontal&per_page=12\n\nconst fetchImages = ({ searchQuery = \"\", currentPage = 1 }) => {\n  const query = `?q=${searchQuery}&page=${currentPage}&key=${data.API_KEY}&image_type=photo&orientation=horizontal&per_page=${data.PER_PAGE}`;\n\n  // console.log(\"fetchImages ~ searchQuery: \", searchQuery);\n  // console.log(\"fetchImages ~ currentPage: \", currentPage);\n\n  const userRequest = instance\n    .get(`${query}`, {\n      timeout: 10000,\n    })\n    .then((response) => response.data);\n  return userRequest;\n};\n\nexport default { fetchImages };\n","import React, { Component } from \"react\";\nimport LoaderItem from \"react-loader-spinner\";\n\nimport Container from \"./components/Container\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\nimport Loader from \"./components/Loader\";\nimport Button from \"./components/Button\";\nimport Modal from \"./components/Modal\";\n\nimport pixabayApi from \"./services/pixabay-api\";\n\nexport default class App extends Component {\n  state = {\n    images: [],\n    searchQuery: \"\",\n    currentPage: 1,\n    largeImageURL: \"\",\n    isLoading: false,\n    totalImages: 0,\n    showModal: false,\n    error: null,\n  };\n\n  componentDidMount() {\n    console.log(\"App componentDidMount\");\n\n    const { searchQuery, currentPage } = this.state;\n\n    this.fetchImages();\n\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  }\n\n  fetchImages = () => {\n    const { currentPage, searchQuery } = this.state;\n    const options = { searchQuery, currentPage };\n    // console.log(\"App ~ options: \", options);\n\n    this.setState({ isLoading: true });\n\n    pixabayApi\n      .fetchImages(options)\n      .then((data) => {\n        console.log(\"APP pixabayApi ~ data: \", data);\n\n        const imagesQuery = data.hits;\n        const totalImages = data.total;\n        this.setState((prevState) => ({\n          images: [...prevState.images, ...imagesQuery],\n          totalImages: totalImages,\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .catch((error) => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  onChangeQuery = (query) => {\n    console.log(\"App ~ query: \", query);\n    this.setState({\n      searchQuery: query,\n      currentPage: 1,\n      images: [],\n      error: null,\n    });\n  };\n\n  onLoadMore = () => {\n    this.fetchImages();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  showLargeImage = ({ largeImageURL }) => {\n    console.log(\"App ~ url\", largeImageURL);\n\n    this.setState({\n      largeImageURL: largeImageURL,\n      showModal: !this.state.showModal,\n    });\n  };\n\n  render() {\n    const { images, isLoading, totalImages, showModal, largeImageURL } =\n      this.state;\n    const diffCurrentLoadImages = totalImages - images.length;\n    const isShowLoadMore =\n      images.length > 0 && diffCurrentLoadImages > 0 && !isLoading;\n\n    return (\n      <Container>\n        <Searchbar onSubmit={this.onChangeQuery} />\n        {images.length > 0 && (\n          <ImageGallery showLargeImage={this.showLargeImage} images={images} />\n        )}\n\n        {isLoading && <Loader />}\n\n        {isShowLoadMore && <Button onLoadMore={this.onLoadMore} />}\n\n        {/* <Modal onClose={this.toggleModal}>\n                    <p>MODAL</p>\n                </Modal> */}\n\n        {showModal && (\n          <Modal\n            largeImageURL={largeImageURL}\n            onClose={this.toggleModal}\n          ></Modal>\n        )}\n      </Container>\n    );\n  }\n}\n\n// export default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"modern-normalize/modern-normalize.css\";\n\nimport App from \"./App\";\nimport \"./styles.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__jo466\",\"search_form\":\"Searchbar_search_form__20B-z\",\"search_form_button\":\"Searchbar_search_form_button__2jdmA\",\"search_form_button-label\":\"Searchbar_search_form_button-label__35t5Q\",\"search_form_input\":\"Searchbar_search_form_input__3rbmt\"};"],"sourceRoot":""}